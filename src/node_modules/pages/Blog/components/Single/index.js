import React, { useEffect } from 'react';
import { connect } from 'react-redux';

import Author from '../Author';
import fetchBlogSingle from 'redux/actions/blogSingle';

import './single.scss';
import { Link } from 'react-router-dom';

function Single({ fetchBlogSingle, match, data }) {

    const slug = match.params.slug;

    useEffect(() => {
        fetchBlogSingle(slug);
    }, [fetchBlogSingle, slug]);

    return (
        <main className="main">
            <div className="container">
                {data && (
                    <article className="blog-single">
                        <h1 className="blog-single__title">{data.title}</h1>
                        <Author
                            author={data.author.username}
                            avatar={data.author.avatar}
                        />
                        <Link className="button default small" to="/">CSS</Link>
                        <Link className="button default small" to="/">JavaScript</Link>
                        <Link className="button default small" to="/">React</Link>
                        <div className="blog-single__description">
                            <p>{data.body}</p>
                            <p>{data.body}</p>
                            <p>{data.body}</p>
                            <h2>Maecenas pretium lorem fermentum</h2>
                            <p>{data.body}</p>
                            <p>{data.body}</p>
                            <p>{data.body}</p>
                        </div>
                    </article>
                )}
            </div>
        </main>
    );
}

const mapStateToProps = (state) => ({
    data: state.blogSingle.data,
});

const mapDispatchToProps = {
    fetchBlogSingle,
};

export default connect(mapStateToProps, mapDispatchToProps)(Single);