import React, { Suspense, Fragment, lazy } from 'react';
import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';

import Navbar from 'components/Navbar';
import Books from 'pages/Books';

import './index.scss';

const Users = lazy(() => import('pages/Users'))
const Home = lazy(() => import('pages/Home'));
const Blog = lazy(() => import('pages/Blog'));
const BlogSingle = lazy(() => import('pages/Blog/components/Single'));
const Gallery = lazy(() => import('pages/Gallery'));
const Courses = lazy(() => import('pages/Courses'));
const Course = lazy(() => import('pages/Course'));
const Registration = lazy(() => import('pages/Registration'));

function App() {

    return (
        <Router>
            <Fragment>
                <Navbar />
                <Suspense fallback={<div>Загрузка...</div>}>
                    <Switch>
                        <Route path="/" component={Home} exact />

                        <Route path="/registration" component={Registration} />

                        <Route path="/users" component={Users} />
                        <Route path="/user/:userId" component={Users} />

                        <Route path="/blog" component={Blog} exact />
                        <Route path="/blog/new" component={Blog} />
                        <Route path="/blog/:slug" component={BlogSingle} />
                        <Route path="/blog/:slug/edit" component={Blog} />

                        <Route path="/gallery" component={Gallery} />

                        <Route path="/courses" component={Courses} />
                        <Route path="/course/:slug" component={Course} />

                        <Route path="/books" component={Books} />
                    </Switch>
                </Suspense>
            </Fragment>
        </Router>
    );
};

export default App;